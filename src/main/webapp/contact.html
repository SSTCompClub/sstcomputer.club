<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>SST Computer Club - Contact</title>

        <!-- Website icon -->
        <link rel="apple-touch-icon-precomposed" sizes="57x57" href="img/favicon/apple-touch-icon-57x57.png">
        <link rel="apple-touch-icon-precomposed" sizes="60x60" href="img/favicon/apple-touch-icon-60x60.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="img/favicon/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon-precomposed" sizes="76x76" href="img/favicon/apple-touch-icon-76x76.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="img/favicon/apple-touch-icon-114x114.png">
        <link rel="apple-touch-icon-precomposed" sizes="120x120" href="img/favicon/apple-touch-icon-120x120.png">
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="img/favicon/apple-touch-icon-144x144.png">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="img/favicon/apple-touch-icon-152x152.png">
        <link rel="icon" type="image/png" href="img/favicon/favicon-16x16.png" sizes="16x16">
        <link rel="icon" type="image/png" href="img/favicon/favicon-32x32.png" sizes="32x32">
        <link rel="icon" type="image/png" href="img/favicon/favicon-96x96.png" sizes="96x96">
        <link rel="icon" type="image/png" href="img/favicon/favicon-128x128.png" sizes="128x128">
        <link rel="icon" type="image/png" href="img/favicon/favicon-196x196.png" sizes="196x196">

        <!-- CSS -->
        <link href="css/bootstrap.css" rel="stylesheet">
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/main.css" rel="stylesheet">

        <!-- JavaScript -->
        <script src="js/jquery.js" type="text/javascript"></script>
        <script src="js/bootstrap.min.js" type="text/javascript"></script>
        <script src="js/defaults.js" type="text/javascript"></script>
        <script src='https://www.google.com/recaptcha/api.js'></script>

        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>
        <!-- Navigation -->
        <div id="navigation-bar"></div>

        <!-- Page Content -->
        <div class="container">

            <!-- Page Heading/Breadcrumbs -->
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">Contact</h1>
                    <ol class="breadcrumb">
                        <li><a href="index.html">Home</a>
                        </li>
                        <li class="active">Contact</li>
                    </ol>
                </div>
            </div>
            <!-- /.row -->

            <form action="javascript:contact();">
                <br>
                <label for="name">Name:</label>
                <input id="name" required type="text" style="width: 50%;">
                <br>

                <label for="email">E-Mail:</label>
                <input id="email" required type="text" style="width: 50%;">
                <br><br>
                
                <label for="message">Message:</label>
                <textarea id="message" required rows="15" style="width: 100%;"></textarea><br>
                <br>

                <div class="g-recaptcha"  data-sitekey="6Lcw3goTAAAAACq8XvGabfuAk9KjS5kzbzFFDJau" style="padding-left: 10px; margin-top: -10px;"></div>
                <input type="submit" style="padding-right: 10px;">
                <label id="error"></label>
            </form>
            
            <hr>

            <!-- Footer -->
            <footer style="display: -webkit-box;"></footer>

        </div>
        <!-- /.container -->

        <script>
            initDefaults();
            setActive("about");
            
            function contact() {
                var json = {};
                json.name = document.getElementById('name').value;
                json.email = document.getElementById('email').value;
                json.message = document.getElementById('message').value;
                json.response = grecaptcha.getResponse();
                
                var content = JSON.stringify(json);
                
                if (!(json.response === "")) {
                    document.getElementById('error').innerHTML = "";
                    
                    var xmlhttp = new XMLHttpRequest();

                    xmlhttp.onreadystatechange = function() {
                        if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {  
                            var responseJSON = JSON.parse(xmlhttp.responseText);
                            if (responseJSON['success'] === true) {
                                document.getElementById('name').value = "";
                                document.getElementById('email').value = "";
                                document.getElementById('message').value = "";
                                document.getElementById('error').innerHTML = "Your message has been sent.";
                            } else if (responseJSON['success'] === false) {
                                document.getElementById('error').innerHTML = "Oh no! We think you're a robot ... are you?";
                            }
                        }

                        if (xmlhttp.status === 500) {
                            document.getElementById('error').innerHTML = "Error 500. An internal server error has occured. Can't handle request.";
                        }
                    };

                    xmlhttp.open("POST", "/contact", true);
                    xmlhttp.send(content);
                } else {
                    document.getElementById('error').innerHTML = "Please verify that you're not a robot.";
                }
            }
        </script>
    </body>
</html>
